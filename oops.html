<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <p id="demo"></p>

    <script>

        //using object literal
        let person = {
            firstName: 'Dhruv',
            lastName: 'Solanki',

            getFunction: function () {
                return `Name is ${person.firstName} ${person.lastName}`
            },

            phoneNumber: {
                mobile: '123456',
                landline: '678901'
            }
        }

        console.log(person.getFunction());
        console.log(person.phoneNumber.landline);


        //using object constructor

        function person1(firstName, lastName) {
            this.firstName = firstName;
            this.lastName = lastName;
        }

        const p1 = new person1("Dhruv", "Solanki");

        console.log(p1.firstName, p1.lastName);

        //abstraction
        function person2(fname, lname) {
            let firstName1 = fname;
            let lastName = lname;

            this.getDetails = function () {
                return (`First name is: ${firstName1}, Last name is: ${lastName}`);
            }
        }

        let p2 = new person2("Dhruv", "Solanki");
        console.log(p2.getDetails());

        /////Callbacks

        function display(some) {
            console.log("Sum is ", some);
        }

        function myCalc(num1, num2, callback) {
            let sum = num1 + num2;
            callback(sum);
        }

        myCalc(5, 5, display);

        //Asynchronous 
        document.getElementById("demo").innerHTML += "Start";
        setTimeout(func1, 3000);
        document.getElementById("demo").innerHTML += "End";

        function func1() {
            document.getElementById("demo").innerHTML += "Hello world<br>";
        }

        setInterval(func2, 1000);

        function func2() {
            let d = new Date();
            // document.getElementById("demo").innerHTML = d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds();
        }


        ////Callback hell

        // function getData(id,getNextData){
        //     setTimeout(()=>{
        //         console.log(id);
        //         if(getNextData){
        //             getNextData();
        //         }
        //     },2000);
        // }

        // getData(1,()=>{
        //     getData(2,()=>{
        //         getData(3,()=>{
        //             getData(4);
        //         });
        //     });
        // })

        //// Promise

        // let promise = new Promise((resolve,reject)=>{
        //     console.log("I am a promise");
        //     resolve("success");
        // })

        // const getPromise = ()=>{
        //     return new Promise((resolve,reject)=>{
        //         console.log("I am a promise");
        //         // resolve("success1");
        //         reject("failed"); 
        //     });
        // };

        // let promise = getPromise();
        // promise.then((res)=>{
        //     console.log("promise fulfilled",res);
        // });
        // promise.catch((err)=>{
        //     console.log("promise rejected",err)
        // })

        // function getData(id,getNextData){
        //     return new Promise((resolve,reject)=>{
        //         setTimeout(()=>{
        //         console.log(id);
        //         resolve("sucess");
        //         if(getNextData){
        //             getNextData();
        //         }
        //     },5000);
        //     })
        // }


        ////promise chain

        // function async1(){
        //     return new Promise((resolve,reject)=>{
        //         setTimeout(()=>{
        //             console.log("Data1");
        //             resolve("success");
        //         },4000);
        //     });
        // }

        // function async2(){
        //     return new Promise((resolve,reject)=>{
        //         setTimeout(()=>{
        //             console.log("Data2");
        //             resolve("success");
        //         },4000);
        //     });
        // }

        // console.log("fetching Data1....");
        // let pr1 = async1();
        // pr1.then((res)=>{
        //     console.log("fetching Data2....");
        //     let p2 = async2();
        //     p2.then((res) => {});
        // });

        // function getData(id, getNextData) {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(() => {
        //             console.log("Data ", id);
        //             resolve("sucess");
        //         }, 3000);
        //     });
        // }

        // getData(1)
        //     .then((res) => {
        //         return getData(2);
        //     })
        //     .then((res) => {
        //         return getData(3);
        //     })
        //     .then((res) => {
        //         return getData(4);
        //     })
        //     .then((res) => {
        //         console.log("success");
        //     });

        //// Async and Await
        
        function getData(id, getNextData) {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log("Data ", id);
                    resolve("sucess");
                }, 3000);
            });
        }

        async function getAllData() {
            await getData(1);
            await getData(2);
            await getData(3);
            await getData(4);
        }

    </script>
</body>

</html>